(self.webpackChunkcap=self.webpackChunkcap||[]).push([[6393],{6393:(o,t,i)=>{"use strict";i.r(t),i.d(t,{SkipStopPageModule:()=>q});var e=i(1116),s=i(1041),n=i(5394),r=i(3146),c=i(4762),u=i(5724),a=i(9609),l=i(5614),d=i(8579);function p(o,t){if(1&o&&(l.TgZ(0,"ion-select-option",16),l._uU(1),l.qZA()),2&o){const o=t.$implicit;l.Q6J("value",o.IDENT2_0),l.xp6(1),l.hij("",o.TEXTE_0," ")}}function g(o,t){1&o&&(l.TgZ(0,"p",18),l._uU(1," Select reason. "),l.qZA())}function h(o,t){if(1&o&&(l.TgZ(0,"ion-text"),l.YNc(1,g,2,0,"p",17),l.qZA()),2&o){l.oxw();const o=l.MAs(18);l.xp6(1),l.Q6J("ngIf",o.invalid&&o.errors.required)}}function m(o,t){1&o&&(l.TgZ(0,"p",18),l._uU(1," Reason for skipping this stop is required. "),l.qZA())}function Z(o,t){if(1&o&&(l.TgZ(0,"ion-text"),l.YNc(1,m,2,0,"p",17),l.qZA()),2&o){l.oxw();const o=l.MAs(28);l.xp6(1),l.Q6J("ngIf",o.invalid&&o.errors.required)}}const f=function(o){return{"full-width":o}},A=[{path:"",component:(()=>{class o{constructor(o,t,i,e){this.utilService=o,this.routesService=t,this.route=i,this.router=e,this.submitted=!1,this.skipstopModel={reason:"",comment:""},this.route.queryParams.subscribe(o=>{o&&o.docNo&&(this.docNo=o.docNo,this.cus_name=o.cus_name,this.cus_code=o.cus_code)})}ngOnInit(){return(0,c.mG)(this,void 0,void 0,function*(){yield this.utilService.showLoading(),this.routesService.skipReason().subscribe(o=>{this.skipReasons=o,this.utilService.dismissLoading()},o=>{this.utilService.dismissLoading(),this.utilService.showErrorCall(o)})})}onSubmit(o){this.submitted=!0,o.valid&&this.utilService.showConfirmationPopup("Confirmation","Are you sure you want to skip this stop.",o=>(0,c.mG)(this,void 0,void 0,function*(){if(1==o){this.skipstopModel.doc=this.docNo,this.skipstopModel.latitude=u.f.currentPos.lat,this.skipstopModel.longitude=u.f.currentPos.lng;const o=a().format("YYYY-MM-DDTHH:mm:ss");this.skipstopModel.datetime=o,yield this.utilService.showLoading(),this.routesService.postSkipRoute(this.skipstopModel).subscribe(o=>{this.utilService.dismissLoading();let t=localStorage.getItem("activeRouteId");this.router.navigate(["/tabs/stop-list"],{queryParams:{route:t}})},o=>{this.utilService.dismissLoading(),this.utilService.showErrorCall(o)})}}))}}return o.\u0275fac=function(t){return new(t||o)(l.Y36(u.f),l.Y36(d._),l.Y36(r.gz),l.Y36(r.F0))},o.\u0275cmp=l.Xpm({type:o,selectors:[["app-skip-stop"]],decls:32,vars:11,consts:[["color","dark"],["slot","start"],[1,"header-title"],["color","tertiary",1,"ion-padding"],["novalidate","",3,"ngSubmit"],["skipstopForm","ngForm"],[1,"mt-3","pb-1"],["lines","full"],[3,"hidden"],["name","reason","value","brown","okText","Okay","cancelText","Dismiss","required","",3,"ngClass","ngModel","ngModelChange"],["reason","ngModel"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["name","comment","placeholder","Enter here...","rows","4","required","",3,"ngModel","ngModelChange"],["comment","ngModel"],["type","submit","color","warning","expand","block","shape","round",1,"mt-3"],[3,"value"],["class","error-msg",4,"ngIf"],[1,"error-msg"]],template:function(o,t){if(1&o){const o=l.EpF();l.TgZ(0,"ion-header"),l.TgZ(1,"ion-toolbar",0),l.TgZ(2,"ion-buttons",1),l._UZ(3,"ion-back-button"),l.qZA(),l.TgZ(4,"ion-title",2),l._uU(5),l.qZA(),l.qZA(),l.qZA(),l.TgZ(6,"ion-content",3),l.TgZ(7,"form",4,5),l.NdJ("ngSubmit",function(){l.CHM(o);const i=l.MAs(8);return t.onSubmit(i)}),l.TgZ(9,"ion-row"),l.TgZ(10,"ion-col"),l.TgZ(11,"ion-text"),l.TgZ(12,"h6",6),l._uU(13,"Choose a reason"),l.qZA(),l.qZA(),l.TgZ(14,"ion-item",7),l.TgZ(15,"ion-label",8),l._uU(16,"Select Reason"),l.qZA(),l.TgZ(17,"ion-select",9,10),l.NdJ("ngModelChange",function(o){return t.skipstopModel.reason=o}),l.YNc(19,p,2,2,"ion-select-option",11),l.qZA(),l.qZA(),l.YNc(20,h,2,1,"ion-text",12),l.qZA(),l.qZA(),l.TgZ(21,"ion-row"),l.TgZ(22,"ion-col"),l.TgZ(23,"ion-text"),l.TgZ(24,"h6",6),l._uU(25,"Why are you skipping this stop?"),l.qZA(),l.qZA(),l.TgZ(26,"ion-item",7),l.TgZ(27,"ion-textarea",13,14),l.NdJ("ngModelChange",function(o){return t.skipstopModel.comment=o}),l.qZA(),l.qZA(),l.YNc(29,Z,2,1,"ion-text",12),l.qZA(),l.qZA(),l.TgZ(30,"ion-button",15),l._uU(31," Skip This Stop "),l.qZA(),l.qZA(),l.qZA()}if(2&o){const o=l.MAs(18),i=l.MAs(28);l.xp6(5),l.AsE("",t.cus_name," - ",t.docNo,""),l.xp6(10),l.Q6J("hidden",t.skipstopModel.reason),l.xp6(2),l.Q6J("ngClass",l.VKq(9,f,t.skipstopModel.reason))("ngModel",t.skipstopModel.reason),l.xp6(2),l.Q6J("ngForOf",t.skipReasons),l.xp6(1),l.Q6J("ngIf",t.submitted&&o.invalid),l.xp6(7),l.Q6J("ngModel",t.skipstopModel.comment),l.xp6(2),l.Q6J("ngIf",t.submitted&&i.invalid)}},directives:[n.Gu,n.sr,n.Sm,n.oU,n.cs,n.wd,n.W2,s._Y,s.JL,s.F,n.Nd,n.wI,n.yW,n.Ie,n.Q$,n.t9,n.QI,s.Q7,e.mk,s.JJ,s.On,e.sg,e.O5,n.g2,n.j9,n.YG,n.n0],styles:[".header-title[_ngcontent-%COMP%]{display:inherit}"]}),o})()}];let k=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=l.oAB({type:o}),o.\u0275inj=l.cJS({imports:[[r.Bz.forChild(A)],r.Bz]}),o})(),q=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=l.oAB({type:o}),o.\u0275inj=l.cJS({imports:[[e.ez,s.u5,n.Pc,k]]}),o})()}}]);