(self.webpackChunkcap=self.webpackChunkcap||[]).push([[7658],{7658:(t,e,i)=>{"use strict";i.r(e),i.d(e,{DocumentDetailPageModule:()=>_});var o=i(1116),s=i(1041),n=i(5394),l=i(3146),a=i(4762),u=i(3075),c=i(529),r=i(291),d=i(5614),Z=i(8579),g=i(5724);function p(t,e){1&t&&(d.TgZ(0,"span"),d._uU(1,"Sales Delivery"),d.qZA())}function m(t,e){1&t&&(d.TgZ(0,"span"),d._uU(1,"Customer Returns"),d.qZA())}function h(t,e){1&t&&(d.TgZ(0,"span"),d._uU(1,"Pre Receipt"),d.qZA())}function A(t,e){1&t&&(d.TgZ(0,"span"),d._uU(1,"Customer"),d.qZA())}function T(t,e){1&t&&(d.TgZ(0,"span"),d._uU(1,"Supplier"),d.qZA())}function q(t,e){if(1&t&&(d.TgZ(0,"ion-item",4),d.TgZ(1,"ion-label"),d.TgZ(2,"h2"),d._uU(3),d.qZA(),d.TgZ(4,"div",13),d.TgZ(5,"ion-text",6),d.TgZ(6,"p"),d._uU(7),d.qZA(),d.qZA(),d.TgZ(8,"p"),d._uU(9),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t){const t=e.$implicit;d.xp6(3),d.Oqu(t.ITMREF_0),d.xp6(4),d.AsE("",t.DES_0," ",t.SAU_0,""),d.xp6(2),d.AsE("Qty: ",t.QTY_0," ",t.SAU_0,"")}}function D(t,e){if(1&t){const t=d.EpF();d.ynx(0),d.TgZ(1,"ion-item",4),d._UZ(2,"ion-icon",5),d.TgZ(3,"ion-label"),d.TgZ(4,"h2"),d.YNc(5,p,2,0,"span",3),d.YNc(6,m,2,0,"span",3),d.YNc(7,h,2,0,"span",3),d.qZA(),d.TgZ(8,"ion-text",6),d.TgZ(9,"p"),d._uU(10),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(11,"ion-item",4),d._UZ(12,"ion-icon",7),d.TgZ(13,"ion-label"),d.TgZ(14,"h2"),d.YNc(15,A,2,0,"span",3),d.YNc(16,T,2,0,"span",3),d.qZA(),d.TgZ(17,"ion-text",6),d.TgZ(18,"p"),d._uU(19),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(20,"ion-item",4),d._UZ(21,"ion-icon",8),d.TgZ(22,"ion-label"),d.TgZ(23,"h2"),d._uU(24,"Date"),d.qZA(),d.TgZ(25,"ion-text",6),d.TgZ(26,"p"),d._uU(27),d.ALo(28,"date"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(29,"ion-item",9),d.NdJ("click",function(){d.CHM(t);const e=d.oxw();return e.notesModal(e.documentDetails[0])}),d._UZ(30,"ion-icon",10),d.TgZ(31,"ion-label"),d.TgZ(32,"h2"),d._uU(33,"Notes"),d.qZA(),d.TgZ(34,"ion-text",6),d.TgZ(35,"p"),d._uU(36),d.qZA(),d.qZA(),d.qZA(),d._UZ(37,"ion-icon",11),d.qZA(),d.YNc(38,q,10,5,"ion-item",12),d.BQk()}if(2&t){const t=d.oxw();d.xp6(5),d.Q6J("ngIf",1==t.documentDetails[0].XDOCTYP_0),d.xp6(1),d.Q6J("ngIf",2==t.documentDetails[0].XDOCTYP_0),d.xp6(1),d.Q6J("ngIf",3==t.documentDetails[0].XDOCTYP_0),d.xp6(3),d.Oqu(t.documentDetails[0].XDOCNUM_0),d.xp6(5),d.Q6J("ngIf",3!==t.documentDetails[0].XDOCTYP_0),d.xp6(1),d.Q6J("ngIf",3==t.documentDetails[0].XDOCTYP_0),d.xp6(3),d.AsE("",t.documentDetails[0].XBPCORD_0," - ",t.documentDetails[0].XBPNAME_0,""),d.xp6(8),d.Oqu(d.xi3(28,12,t.documentDetails[0].XDLVDAT_0,"dd-MM-y")),d.xp6(9),d.AsE("",t.documentDetails[0].text1," ",t.documentDetails[0].text2,""),d.xp6(2),d.Q6J("ngForOf",t.documentDetails)}}const x=`\n      <codeLang xsi:type="xsd:string">${c.N.soapLanguage}</codeLang>\n      <poolAlias xsi:type="xsd:string">${c.N.soapPoolAlias}</poolAlias>\n      <poolId xsi:type="xsd:string">?</poolId>\n      <requestConfig xsi:type="xsd:string">?</requestConfig>\n`,f=[{path:"",component:(()=>{class t{constructor(t,e,i,o,s){this.routesService=t,this.route=e,this.utilService=i,this.modalController=o,this.soap=s,this.documentDetails=[],this.route.queryParams.subscribe(t=>{t&&t.document&&(this.detailDetId=t.document,this.getDocumentDetails())})}ngOnInit(){}getDocumentDetails(){return(0,a.mG)(this,void 0,void 0,function*(){yield this.utilService.showLoading(),this.routesService.getDocumentDetails(this.detailDetId).subscribe(t=>{this.documentDetails=t,this.notesEditor(this.documentDetails[0].TEXTE1_0,1),this.notesEditor(this.documentDetails[0].TEXTE2_0,2),this.utilService.dismissLoading()},t=>{this.utilService.dismissLoading(),this.utilService.showErrorCall(t)})})}notesEditor(t,e){let i=`\n         <![CDATA[<PARAM>\n      <FLD NAME="I_XNOTE" TYPE="Char">${t}</FLD>\n      </PARAM>]]>`;this.soap.createClient(c.N.soap+"/soap-wsdl/syracuse/collaboration/syracuse/CAdxWebServiceXmlCC?wsdl",{attributesKey:"attributes",valueKey:"$value",xmlKey:"$xml"}).then(o=>{o.setSecurity(new r.t7.BasicAuthSecurity(c.N.soapUsername,c.N.soapPassword,"")),o.call("run",{callContext:{$xml:x,attributes:{"xsi:type":"wss:CAdxCallContext"}},publicName:{attributes:{"xsi:type":"xsd:string"},$value:"XRICHTEXTC"},inputXml:{attributes:{"xsi:type":"xsd:string"},$xml:i}}).subscribe(i=>{var o;if(this.utilService.dismissLoading(),null===(o=i.result.runReturn.resultXml)||void 0===o?void 0:o.$value){const o=i.result.runReturn.resultXml.$value.RESULT.GRP.FLD;o[1].$value?1==e?this.documentDetails[0].text1=o[1].$value:this.documentDetails[0].text2=o[1].$value:t&&""!==t.trim()&&this.utilService.showToast(o[1].$value)}else this.utilService.showToast(i.result.runReturn.messages[0].message)},t=>{console.log(t),this.utilService.showToast(),this.utilService.dismissLoading()})}).catch(t=>{console.log(t),this.utilService.showToast(),this.utilService.dismissLoading()})}notesModal(t){return(0,a.mG)(this,void 0,void 0,function*(){const e=yield this.modalController.create({component:u.C,componentProps:{docData:t}});yield e.present(),yield e.onDidDismiss()})}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(Z._),d.Y36(l.gz),d.Y36(g.f),d.Y36(n.IN),d.Y36(r.Ey))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-document-detail"]],decls:8,vars:1,consts:[["color","dark"],["slot","start"],["color","tertiary"],[4,"ngIf"],["lines","full"],["slot","start","name","ticket-outline"],["color","medium"],["slot","start","name","person-outline"],["slot","start","name","calendar-outline"],["lines","full",3,"click"],["slot","start","name","document-outline"],["size","small","slot","end","name","chevron-forward-outline"],["lines","full",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","pt-1"]],template:function(t,e){1&t&&(d.TgZ(0,"ion-header"),d.TgZ(1,"ion-toolbar",0),d.TgZ(2,"ion-buttons",1),d._UZ(3,"ion-back-button"),d.qZA(),d.TgZ(4,"ion-title"),d._uU(5,"Document Details"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(6,"ion-content",2),d.YNc(7,D,39,15,"ng-container",3),d.qZA()),2&t&&(d.xp6(7),d.Q6J("ngIf",e.documentDetails.length>0))},directives:[n.Gu,n.sr,n.Sm,n.oU,n.cs,n.wd,n.W2,o.O5,n.Ie,n.gu,n.Q$,n.yW,o.sg],pipes:[o.uU],styles:[""]}),t})()},{path:"notes-detail",loadChildren:()=>i.e(6206).then(i.bind(i,6206)).then(t=>t.NotesDetailPageModule)}];let v=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({imports:[[l.Bz.forChild(f)],l.Bz]}),t})(),_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({imports:[[o.ez,s.u5,n.Pc,v]]}),t})()},3075:(t,e,i)=>{"use strict";i.d(e,{C:()=>n});var o=i(5614),s=i(5394);let n=(()=>{class t{constructor(t,e){var i,o;this.modalController=t,this.params=e,this.note1="",this.note2="",this.docData=e.get("docData"),this.note1=null===(i=this.docData)||void 0===i?void 0:i.text1,this.note2=null===(o=this.docData)||void 0===o?void 0:o.text2}ngOnInit(){}closeModal(){this.modalController.dismiss()}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(s.IN),o.Y36(s.X1))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-notes-detail"]],decls:19,vars:2,consts:[["color","dark"],["slot","end"],[3,"click"],["name","close-circle-outline"],[1,"m-5"],["color","primary"]],template:function(t,e){1&t&&(o.TgZ(0,"ion-header"),o.TgZ(1,"ion-toolbar",0),o.TgZ(2,"ion-title"),o._uU(3,"Notes"),o.qZA(),o.TgZ(4,"ion-buttons",1),o.TgZ(5,"ion-button",2),o.NdJ("click",function(){return e.closeModal()}),o._UZ(6,"ion-icon",3),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(7,"ion-content"),o.TgZ(8,"div",4),o.TgZ(9,"ion-label",5),o.TgZ(10,"h2"),o._uU(11,"Customer Shipment Text"),o.qZA(),o.qZA(),o.TgZ(12,"p"),o._uU(13),o.qZA(),o.TgZ(14,"ion-label",5),o.TgZ(15,"h2"),o._uU(16,"Sales Order Header Text"),o.qZA(),o.qZA(),o.TgZ(17,"p"),o._uU(18),o.qZA(),o.qZA(),o.qZA()),2&t&&(o.xp6(13),o.Oqu(e.note2),o.xp6(5),o.Oqu(e.note1))},directives:[s.Gu,s.sr,s.wd,s.Sm,s.YG,s.gu,s.W2,s.Q$],styles:[""]}),t})()}}]);