"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3047],{3047:(U,v,l)=>{l.r(v),l.d(v,{AuthPageModule:()=>$});var g=l(177),r=l(9417),a=l(8974),m=l(466),t=l(7705),h=l(2342),p=l(3955),f=l(4796),S=l(2865);function w(e,n){1&e&&(t.j41(0,"p",21),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&e&&(t.R7$(1),t.SpI(" ",t.bMT(2,1,"ERROR_MSG.USERNAME_REQ")," "))}function b(e,n){if(1&e&&(t.j41(0,"ion-text"),t.DNE(1,w,3,3,"p",20),t.k0s()),2&e){const i=t.XpG();t.R7$(1),t.Y8G("ngIf",null==i.f.username.errors?null:i.f.username.errors.required)}}function R(e,n){1&e&&(t.j41(0,"p",21),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&e&&(t.R7$(1),t.SpI(" ",t.bMT(2,1,"ERROR_MSG.PASSWORD_REQ")," "))}function I(e,n){if(1&e&&(t.j41(0,"ion-text"),t.DNE(1,R,3,3,"p",20),t.k0s()),2&e){const i=t.XpG();t.R7$(1),t.Y8G("ngIf",null==i.f.password.errors?null:i.f.password.errors.required)}}let F=(()=>{var e;class n{constructor(s,o,u,c,_,d){this.fb=s,this.router=o,this.utilService=u,this.translateService=c,this.authService=_,this.events=d,this.submitted=!1,this.loginForm=this.fb.group({username:["",r.k0.required],password:["",r.k0.required]})}ngOnInit(){}onLogin(){this.submitted=!0,this.utilService.showLoading(),this.loginForm.valid&&this.translateService.get(["COMMON.VERIFYING_LOGIN","COMMON.LOGIN_DONE","COMMON.INVALID_LOGIN"]).subscribe(s=>{this.submitted=!1,this.authService.login(this.loginForm.value).subscribe(o=>{!0===o.success?this.authService.checkUser(o.data.I_XBPCNUM).subscribe(u=>{!0===u.success?(o.data.I_XBPCNUM=u.data.X10CUSID_0,o.data.O_XUSREML||this.authService.updateEmail(o.data.I_XBPCNUM).subscribe(c=>{!0===c.success||this.utilService.showToastError(o.message)}),this.authService.loginDetails(o.data.I_XBPCNUM).subscribe(c=>{!0===c.success?(localStorage.setItem("userName",JSON.stringify(o.data.I_XBPCNUM)),localStorage.setItem("userDetail",JSON.stringify(o.data)),this.utilService.onloadDashboard.next(!0),this.utilService.setTimeOut.next(o.data.I_XBPCNUM),this.router.navigate(["/home"]),this.utilService.showToastSucccess(o.message),this.utilService.dismissLoading()):(this.utilService.dismissLoading(),this.utilService.showToastError(o.message),this.loginForm.reset())})):(this.utilService.dismissLoading(),this.utilService.showToastError(o.message),this.loginForm.reset())}):(this.utilService.dismissLoading(),this.utilService.showToastError(o.message),this.loginForm.reset())})},s=>{this.utilService.dismissLoading(),this.utilService.showErrorCall(s),this.loginForm.reset()})}get f(){return this.loginForm.controls}languageChange(s){this.loginForm.value.lang=s,localStorage.setItem("language",this.loginForm.value.lang),this.events.publish("language:changed",!0)}goTo(){this.router.navigate(["login/forgot-password"])}}return(e=n).\u0275fac=function(s){return new(s||e)(t.rXU(r.ok),t.rXU(m.Ix),t.rXU(h.a),t.rXU(p.c$),t.rXU(f.u),t.rXU(S.s))},e.\u0275cmp=t.VBU({type:e,selectors:[["app-auth"]],decls:36,vars:15,consts:[[1,"container","m-auto","d-flex-center","h-100"],[1,"b-shadow","max-w-350","border-radios-10"],[1,"mx-20","py-3"],[1,"ion-text-center"],["src","assets/img/logo.png","alt","",1,"auth-logo","ion-padding-bottom"],["novalidate","",1,"py-25","w-100",3,"formGroup","ngSubmit"],[1,"custom-input-set","ion-margin-top"],["position","stacked"],["formControlName","username","type","text","required","",1,"custome-input","w-100"],[4,"ngIf"],[1,"ion-no-padding","custom-input-set","ion-margin-top"],["formControlName","password","type","password","required","",1,"custome-input","w-100"],[1,"d-flex","ion-justify-content-end","mt-10",3,"click"],["color","primary",1,"cursor-pointer"],["shape","round","expand","block","type","submit",1,"my-4"],["lines","none",1,"ion-no-border"],["lines","none","mode","md",1,"ion-no-border"],["color","medium",1,"d-flex","ion-justify-content-center","fs-14","fw-600"],[1,"d-flex","ion-justify-content-center","ion-align-items-center"],[1,"ion-no-padding","text-center"],["class","error-msg",4,"ngIf"],[1,"error-msg"]],template:function(s,o){1&s&&(t.j41(0,"ion-content")(1,"ion-row",0)(2,"ion-col",1)(3,"div",2)(4,"div",3),t.nrm(5,"img",4),t.k0s(),t.j41(6,"form",5),t.bIt("ngSubmit",function(){return o.onLogin()}),t.j41(7,"div",6)(8,"ion-label",7),t.EFF(9),t.nI1(10,"translate"),t.k0s(),t.nrm(11,"input",8),t.k0s(),t.DNE(12,b,2,1,"ion-text",9),t.j41(13,"div",10)(14,"ion-label",7),t.EFF(15),t.nI1(16,"translate"),t.k0s(),t.nrm(17,"input",11),t.k0s(),t.DNE(18,I,2,1,"ion-text",9),t.j41(19,"div",12),t.bIt("click",function(){return o.goTo()}),t.j41(20,"ion-text",13),t.EFF(21),t.nI1(22,"translate"),t.k0s()(),t.j41(23,"div")(24,"ion-button",14),t.EFF(25),t.nI1(26,"translate"),t.k0s()()()()()()(),t.j41(27,"ion-footer",15)(28,"ion-toolbar",16)(29,"ion-label",17),t.EFF(30," Version V1.8"),t.k0s(),t.j41(31,"div",18)(32,"p",19),t.EFF(33," Copyright \xa9 2023-24 "),t.nrm(34,"br"),t.EFF(35," Powered by Tema Business Systems Pvt. Ltd. "),t.k0s()()()()),2&s&&(t.R7$(6),t.Y8G("formGroup",o.loginForm),t.R7$(3),t.JRh(t.bMT(10,7,"LOGIN.USER_ID")),t.R7$(3),t.Y8G("ngIf",o.submitted&&o.f.username.errors),t.R7$(3),t.JRh(t.bMT(16,9,"LOGIN.PASSWORD")),t.R7$(3),t.Y8G("ngIf",o.submitted&&o.f.password.errors),t.R7$(3),t.SpI(" ",t.bMT(22,11,"COMMON.FORGOT_PASSWORD"),"? "),t.R7$(4),t.SpI("",t.bMT(26,13,"LOGIN.SIGN_IN")," "))},dependencies:[g.bT,r.qT,r.me,r.BC,r.cb,r.YS,a.Jm,a.hU,a.W9,a.M0,a.he,a.ln,a.IO,a.ai,r.j4,r.JD,p.D9]}),n})();function E(e,n){1&e&&(t.j41(0,"p",18),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&e&&(t.R7$(1),t.SpI(" ",t.bMT(2,1,"ERROR_MSG.EMAIL_REQ")," "))}function x(e,n){1&e&&(t.j41(0,"p",18),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&e&&(t.R7$(1),t.JRh(t.bMT(2,1,"ERROR_MSG.EMAIL_INVALID")))}function T(e,n){if(1&e&&(t.j41(0,"ion-text"),t.DNE(1,E,3,3,"p",17),t.DNE(2,x,3,3,"p",17),t.k0s()),2&e){const i=t.XpG();t.R7$(1),t.Y8G("ngIf",null==i.f.email.errors?null:i.f.email.errors.required),t.R7$(1),t.Y8G("ngIf",null==i.f.email.errors?null:i.f.email.errors.email)}}let P=(()=>{var e;class n{constructor(s,o,u,c){this.fb=s,this.authService=o,this.router=u,this.utilService=c,this.submitted=!1,this.forgotForm=this.fb.group({email:["",[r.k0.required,r.k0.email]]})}ngOnInit(){}onForgot(){this.submitted=!0,this.forgotForm.valid&&(this.utilService.showLoading(),this.authService.forgotPassword(this.forgotForm.value).subscribe(s=>{this.utilService.dismissLoading(),!0===s.success?(this.utilService.showToastSucccess("A password reset link email has been sent to your registered email. Please verify"),this.router.navigate(["login"])):this.utilService.showToastError(s.message)},s=>{this.utilService.dismissLoading(),this.utilService.showErrorCall(s)}))}get f(){return this.forgotForm.controls}goTo(){this.router.navigate(["login"])}}return(e=n).\u0275fac=function(s){return new(s||e)(t.rXU(r.ok),t.rXU(f.u),t.rXU(m.Ix),t.rXU(h.a))},e.\u0275cmp=t.VBU({type:e,selectors:[["app-forgot-password"]],decls:29,vars:11,consts:[[1,"container","m-auto","d-flex-center","h-100"],[1,"b-shadow","max-w-500","border-radios-10"],[1,"mx-20","py-3"],[1,"ion-text-center"],["src","assets/img/logo.png","alt","",1,"auth-logo","ion-padding-bottom"],["novalidate","",1,"px-30",3,"formGroup","ngSubmit"],[1,"ion-margin-top"],["size","12",1,"p-0"],[1,"fs-20","fw-900"],[1,"ion-margin-top","fs-14"],[1,"custom-input-set","ion-margin-top"],["position","stacked"],["formControlName","email","type","email","required","",1,"custome-input","w-100"],[4,"ngIf"],["shape","round","expand","block","type","submit",1,"my-4"],[1,"d-flex","ion-justify-content-center","ion-margin-top","ion-align-items-center","cursor-pointer",3,"click"],["name","chevron-back-outline"],["class","error-msg",4,"ngIf"],[1,"error-msg"]],template:function(s,o){1&s&&(t.j41(0,"ion-content")(1,"ion-row",0)(2,"ion-col",1)(3,"div",2)(4,"div",3),t.nrm(5,"img",4),t.k0s(),t.j41(6,"form",5),t.bIt("ngSubmit",function(){return o.onForgot()}),t.j41(7,"ion-row",6)(8,"ion-col",7)(9,"div",8),t.EFF(10),t.nI1(11,"translate"),t.k0s(),t.j41(12,"div",9),t.EFF(13,"Enter your email and we'll send you a link to reset your password"),t.k0s()()(),t.j41(14,"div",10)(15,"div",10)(16,"ion-label",11),t.EFF(17),t.nI1(18,"translate"),t.k0s(),t.nrm(19,"input",12),t.k0s()(),t.DNE(20,T,3,2,"ion-text",13),t.j41(21,"div")(22,"ion-button",14),t.EFF(23),t.nI1(24,"translate"),t.k0s()()(),t.j41(25,"div",15),t.bIt("click",function(){return o.goTo()}),t.nrm(26,"ion-icon",16),t.j41(27,"ion-text"),t.EFF(28,"\xa0Back to Login"),t.k0s()()()()()()),2&s&&(t.R7$(6),t.Y8G("formGroup",o.forgotForm),t.R7$(4),t.JRh(t.bMT(11,5,"COMMON.FORGOT_PASSWORD")),t.R7$(7),t.JRh(t.bMT(18,7,"LOGIN.EMAIL")),t.R7$(3),t.Y8G("ngIf",o.submitted&&o.f.email.errors),t.R7$(3),t.SpI("",t.bMT(24,9,"LOGIN.SUBMIT")," "))},dependencies:[g.bT,r.qT,r.me,r.BC,r.cb,r.YS,a.Jm,a.hU,a.W9,a.iq,a.he,a.ln,a.IO,r.j4,r.JD,p.D9],styles:[".max-w-500[_ngcontent-%COMP%]{max-width:400px}"]}),n})();var k=l(8064);function M(e,n){1&e&&(t.j41(0,"ion-row",2)(1,"ion-col",3)(2,"div",4)(3,"div",5)(4,"div",6),t.nrm(5,"img",7),t.k0s(),t.j41(6,"div",6)(7,"h1",8),t.EFF(8,"Link Expired"),t.k0s(),t.j41(9,"p",9),t.EFF(10,"Sorry, this link has expired. Please try requesting a new one."),t.k0s()()()()()())}function C(e,n){1&e&&(t.j41(0,"p",26),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&e&&(t.R7$(1),t.SpI(" ",t.bMT(2,1,"ERROR_MSG.USERNAME_REQ")," "))}function N(e,n){if(1&e&&(t.j41(0,"ion-text"),t.DNE(1,C,3,3,"p",25),t.k0s()),2&e){const i=t.XpG(2);t.R7$(1),t.Y8G("ngIf",null==i.f.password.errors?null:i.f.password.errors.required)}}function O(e,n){1&e&&(t.j41(0,"p",26),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&e&&(t.R7$(1),t.SpI(" ",t.bMT(2,1,"ERROR_MSG.PASSWORD_REQ")," "))}function j(e,n){1&e&&(t.j41(0,"p",26),t.EFF(1," Passwords do not match. Please ensure that both passwords are identical. "),t.k0s())}function y(e,n){if(1&e&&(t.j41(0,"ion-text"),t.DNE(1,O,3,3,"p",25),t.DNE(2,j,2,0,"p",25),t.k0s()),2&e){const i=t.XpG(2);t.R7$(1),t.Y8G("ngIf",null==i.f.confirm_password.errors?null:i.f.confirm_password.errors.required),t.R7$(1),t.Y8G("ngIf",!(null!=i.f.confirm_password.errors&&i.f.confirm_password.errors.required))}}function G(e,n){if(1&e){const i=t.RV6();t.j41(0,"div",27),t.bIt("click",function(){t.eBV(i);const o=t.XpG(2);return t.Njj(o.goTo())}),t.nrm(1,"ion-icon",28),t.j41(2,"ion-text"),t.EFF(3,"\xa0Back to Profile"),t.k0s()()}}function A(e,n){if(1&e){const i=t.RV6();t.j41(0,"ion-row",10)(1,"ion-col",11)(2,"div",12)(3,"div",6),t.nrm(4,"img",7),t.k0s(),t.j41(5,"form",13),t.bIt("ngSubmit",function(){t.eBV(i);const o=t.XpG();return t.Njj(o.onReset())}),t.j41(6,"ion-row",14)(7,"ion-col",15)(8,"div",16),t.EFF(9),t.nI1(10,"translate"),t.k0s()()(),t.j41(11,"div",17)(12,"ion-label",18),t.EFF(13),t.nI1(14,"translate"),t.k0s(),t.nrm(15,"input",19),t.nI1(16,"translate"),t.k0s(),t.DNE(17,N,2,1,"ion-text",20),t.j41(18,"div",21)(19,"ion-label",18),t.EFF(20),t.nI1(21,"translate"),t.k0s(),t.nrm(22,"input",22),t.nI1(23,"translate"),t.k0s(),t.DNE(24,y,3,2,"ion-text",20),t.j41(25,"div")(26,"ion-button",23),t.EFF(27),t.nI1(28,"translate"),t.k0s()(),t.DNE(29,G,4,0,"div",24),t.k0s()()()()}if(2&e){const i=t.XpG();t.R7$(5),t.Y8G("formGroup",i.resetForm),t.R7$(4),t.JRh(t.bMT(10,10,"COMMON.RESET_PASSWORD")),t.R7$(4),t.JRh(t.bMT(14,12,"LOGIN.NEW_PASSWORD")),t.R7$(2),t.FS9("placeholder",t.bMT(16,14,"LOGIN.PLACE_PASSWORD")),t.R7$(2),t.Y8G("ngIf",i.submitted&&i.f.password.errors),t.R7$(3),t.JRh(t.bMT(21,16,"LOGIN.CONFIRM_NEW_PASSWORD")),t.R7$(2),t.FS9("placeholder",t.bMT(23,18,"LOGIN.PLACE_PASSWORD")),t.R7$(2),t.Y8G("ngIf",i.submitted&&i.f.confirm_password.errors),t.R7$(3),t.SpI("",t.bMT(28,20,"COMMON.RESET_PASSWORD")," "),t.R7$(2),t.Y8G("ngIf","profile"==i.pageType)}}const D=[{path:"",component:F},{path:"forgot-password",component:P},{path:"reset-password",component:(()=>{var e;class n{constructor(s,o,u,c,_){this.router=s,this.utilService=o,this.authService=u,this.route=c,this.fb=_,this.submitted=!1,this.route.queryParams.subscribe(d=>{this.userId=d.userId,this.pageType=d.page}),this.resetForm=this.fb.group({password:["",[r.k0.required]],confirm_password:["",[r.k0.required,d=>k.u.passwordMatchValidator(d,this.resetForm,"password")]]})}ngOnInit(){"profile"!==this.pageType?this.authService.resetUser(this.userId).subscribe(s=>{s&&s.success&&s.data&&s.data.length>0?this.resetFormVisible=!0:this.linkExpired=!0}):this.resetFormVisible=!0}onReset(){if(this.submitted=!0,this.resetForm.valid){this.utilService.showLoading();const s={userId:this.userId,password:this.resetForm.value.password};"profile"==this.pageType?this.authService.resetPasswords(s).subscribe(o=>{this.utilService.dismissLoading(),!0===o.success?(this.utilService.showToastSucccess(o.message),this.router.navigate(["login"])):this.utilService.showToastError(o.message)},o=>{this.utilService.dismissLoading(),this.utilService.showErrorCall(o)}):this.authService.resetPassword(s).subscribe(o=>{!0===o.success?(this.utilService.showToastSucccess(o.message),this.userUpdate()):(this.utilService.dismissLoading(),this.utilService.showToastError(o.message))},o=>{this.utilService.dismissLoading(),this.utilService.showErrorCall(o)})}}userUpdate(){this.authService.userUpdate(this.userId).subscribe(s=>{s.success?(this.router.navigate(["login"]),this.utilService.dismissLoading()):(this.utilService.dismissLoading(),this.utilService.showToastError(s.message))})}get f(){return this.resetForm.controls}goTo(){this.router.navigate(["/account/profile"])}}return(e=n).\u0275fac=function(s){return new(s||e)(t.rXU(m.Ix),t.rXU(h.a),t.rXU(f.u),t.rXU(m.nX),t.rXU(r.ok))},e.\u0275cmp=t.VBU({type:e,selectors:[["app-reset-password"]],decls:3,vars:2,consts:[["class","ion-justify-content-center ion-align-items-center h-100",4,"ngIf"],["class","container m-auto d-flex-center h-100",4,"ngIf"],[1,"ion-justify-content-center","ion-align-items-center","h-100"],["size","12",1,"d-flex","ion-justify-content-center","ion-align-items-center"],[1,"b-shadow","max-w-350","border-radios-15"],[1,"mx-20","py-4"],[1,"ion-text-center"],["src","assets/img/logo.png","alt","",1,"auth-logo","ion-padding-bottom"],[1,"fw-900","fs-24","color-primary","mb-10"],[1,"text-muted","fs-16","mb-20"],[1,"container","m-auto","d-flex-center","h-100"],[1,"b-shadow","max-w-350","border-radios-10"],[1,"mx-20","py-3"],["novalidate","",1,"px-30",3,"formGroup","ngSubmit"],[1,"ion-margin-top"],["size","12",1,"p-0"],[1,"fs-20","fw-900"],[1,"custom-input-set","ion-margin-top"],["position","stacked"],["formControlName","password","type","password","maxlength","20","autocomplete","off","required","",1,"custome-input","w-100",3,"placeholder"],[4,"ngIf"],[1,"ion-no-padding","custom-input-set","ion-margin-top"],["type","text","formControlName","confirm_password","type","password","maxlength","20","autocomplete","off","required","",1,"custome-input","w-100",3,"placeholder"],["shape","round","expand","block","type","submit",1,"my-4"],["class","d-flex ion-justify-content-center ion-margin-top ion-align-items-center cursor-pointer",3,"click",4,"ngIf"],["class","error-msg",4,"ngIf"],[1,"error-msg"],[1,"d-flex","ion-justify-content-center","ion-margin-top","ion-align-items-center","cursor-pointer",3,"click"],["name","chevron-back-outline"]],template:function(s,o){1&s&&(t.j41(0,"ion-content"),t.DNE(1,M,11,0,"ion-row",0),t.DNE(2,A,30,22,"ion-row",1),t.k0s()),2&s&&(t.R7$(1),t.Y8G("ngIf",o.linkExpired),t.R7$(1),t.Y8G("ngIf",o.resetFormVisible))},dependencies:[g.bT,r.qT,r.me,r.BC,r.cb,r.YS,r.tU,a.Jm,a.hU,a.W9,a.iq,a.he,a.ln,a.IO,r.j4,r.JD,p.D9]}),n})()}];let L=(()=>{var e;class n{}return(e=n).\u0275fac=function(s){return new(s||e)},e.\u0275mod=t.$C({type:e}),e.\u0275inj=t.G2t({imports:[m.iI.forChild(D),m.iI]}),n})(),$=(()=>{var e;class n{}return(e=n).\u0275fac=function(s){return new(s||e)},e.\u0275mod=t.$C({type:e}),e.\u0275inj=t.G2t({imports:[g.MD,r.YN,a.bv,L,r.YN,r.X1,p.h]}),n})()}}]);