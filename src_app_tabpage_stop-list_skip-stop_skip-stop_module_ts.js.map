{"version":3,"sources":["./src/app/tabpage/stop-list/skip-stop/skip-stop-routing.module.ts","./src/app/tabpage/stop-list/skip-stop/skip-stop.module.ts","./src/app/tabpage/stop-list/skip-stop/skip-stop.page.ts","./src/app/tabpage/stop-list/skip-stop/skip-stop.page.scss","./src/app/tabpage/stop-list/skip-stop/skip-stop.page.html"],"names":[],"mappings":"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","file":"src_app_tabpage_stop-list_skip-stop_skip-stop_module_ts.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { SkipStopPage } from './skip-stop.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: SkipStopPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class SkipStopPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { SkipStopPageRoutingModule } from './skip-stop-routing.module';\r\n\r\nimport { SkipStopPage } from './skip-stop.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    SkipStopPageRoutingModule\r\n  ],\r\n  declarations: [SkipStopPage]\r\n})\r\nexport class SkipStopPageModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { RoutesService } from 'src/app/services/routes.service';\r\nimport { UtilService } from 'src/app/services/util.service';\r\nimport * as moment from 'moment';\r\nimport * as _ from 'lodash';\r\n\r\n\r\n@Component({\r\n  selector: 'app-skip-stop',\r\n  templateUrl: './skip-stop.page.html',\r\n  styleUrls: ['./skip-stop.page.scss'],\r\n})\r\nexport class SkipStopPage implements OnInit {\r\n  submitted = false;\r\n  skipstopModel: any = {\r\n    reason: '',\r\n    comment: '',\r\n  };\r\n  stopId;\r\n  stopsDetails;\r\n  docNo;\r\n  skipReasons;\r\n  cus_name;\r\n  cus_code;\r\n\r\n  constructor(\r\n    private utilService: UtilService,\r\n    private routesService: RoutesService,\r\n    private route: ActivatedRoute,\r\n    private router: Router\r\n  ) {\r\n    this.route.queryParams.subscribe(params => {\r\n      if (params && params.docNo) {\r\n        this.docNo = params.docNo;\r\n        this.cus_name = params.cus_name;\r\n        this.cus_code = params.cus_code;\r\n      }\r\n    });\r\n  }\r\n\r\n  async ngOnInit() {\r\n    await this.utilService.showLoading();\r\n    this.routesService.skipReason().subscribe((resp) => {\r\n      this.skipReasons = resp;\r\n      this.utilService.dismissLoading();\r\n    }, (err) => {\r\n      this.utilService.dismissLoading();\r\n      this.utilService.showErrorCall(err);\r\n    });\r\n  }\r\n\r\n  onSubmit(form) {\r\n    this.submitted = true;\r\n    if (form.valid) {\r\n      this.utilService.showConfirmationPopup('Confirmation', 'Are you sure you want to skip this stop.',\r\n        async cb => {\r\n          if (cb == 1) {\r\n            this.skipstopModel.doc = this.docNo;\r\n            this.skipstopModel.latitude = UtilService.currentPos.lat;\r\n            this.skipstopModel.longitude = UtilService.currentPos.lng;\r\n            const datetime = moment().format('YYYY-MM-DDTHH:mm:ss');\r\n            this.skipstopModel.datetime = datetime;\r\n            await this.utilService.showLoading();\r\n            this.routesService.postSkipRoute(this.skipstopModel).subscribe((resp: any) => {\r\n              this.utilService.dismissLoading();\r\n              // this.updateArray();\r\n              let routeId = localStorage.getItem('activeRouteId');\r\n              this.router.navigate(['/tabs/stop-list'], { queryParams: { route: routeId } });\r\n            }, (err: any) => {\r\n              this.utilService.dismissLoading();\r\n              this.utilService.showErrorCall(err);\r\n            });\r\n          }\r\n        }\r\n      );\r\n    }\r\n  }\r\n\r\n  // async updateArray() {\r\n  //   let documentinfo = await this.utilService.getStorageData('documentinfo').then(\r\n  //     documentinfo => {\r\n  //       const currentStop = _.filter(documentinfo, { XDOCNUM_0: this.docNo });\r\n  //       currentStop[0].isSkip = true;\r\n  //       return documentinfo\r\n  //     }\r\n  //   );\r\n  //   // console.log(documentinfo);\r\n  //   this.utilService.setStorageData('documentinfo', documentinfo)\r\n  // }\r\n}\r\n","export default \".header-title {\\n  display: inherit;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNraXAtc3RvcC5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxnQkFBQTtBQUNKIiwiZmlsZSI6InNraXAtc3RvcC5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuaGVhZGVyLXRpdGxlIHtcclxuICAgIGRpc3BsYXk6IGluaGVyaXQ7XHJcbn0iXX0= */\";","export default \"<ion-header>\\r\\n  <ion-toolbar color=\\\"dark\\\">\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button></ion-back-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title class=\\\"header-title\\\">{{ cus_name }} - {{ docNo }}</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content class=\\\"ion-padding\\\" color=\\\"tertiary\\\">\\r\\n  <form #skipstopForm=\\\"ngForm\\\" novalidate (ngSubmit)=\\\"onSubmit(skipstopForm)\\\">\\r\\n    <ion-row>\\r\\n      <ion-col>\\r\\n        <ion-text>\\r\\n          <h6 class=\\\"mt-3 pb-1\\\">Choose a reason</h6>\\r\\n        </ion-text>\\r\\n        <ion-item lines=\\\"full\\\">\\r\\n          <ion-label [hidden]=\\\"skipstopModel.reason\\\">Select Reason</ion-label>\\r\\n          <ion-select [ngClass]=\\\"{'full-width': skipstopModel.reason}\\\" name=\\\"reason\\\" value=\\\"brown\\\" okText=\\\"Okay\\\" cancelText=\\\"Dismiss\\\" [(ngModel)]=\\\"skipstopModel.reason\\\"\\r\\n            #reason=\\\"ngModel\\\" required>\\r\\n            <ion-select-option *ngFor=\\\"let item of skipReasons\\\" [value]=\\\"item.IDENT2_0\\\">{{ item.TEXTE_0 }}\\r\\n            </ion-select-option>\\r\\n          </ion-select>\\r\\n        </ion-item>\\r\\n        <ion-text *ngIf=\\\"submitted && reason.invalid\\\">\\r\\n          <p class=\\\"error-msg\\\" *ngIf=\\\"reason.invalid && reason.errors.required\\\">\\r\\n            Select reason.\\r\\n          </p>\\r\\n        </ion-text>\\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n    <ion-row>\\r\\n      <ion-col>\\r\\n        <ion-text>\\r\\n          <h6 class=\\\"mt-3 pb-1\\\">Why are you skipping this stop?</h6>\\r\\n        </ion-text>\\r\\n        <ion-item lines=\\\"full\\\">\\r\\n          <ion-textarea name=\\\"comment\\\" placeholder=\\\"Enter here...\\\" rows=\\\"4\\\" [(ngModel)]=\\\"skipstopModel.comment\\\"\\r\\n            #comment=\\\"ngModel\\\" required></ion-textarea>\\r\\n        </ion-item>\\r\\n        <ion-text *ngIf=\\\"submitted && comment.invalid\\\">\\r\\n          <p class=\\\"error-msg\\\" *ngIf=\\\"comment.invalid && comment.errors.required\\\">\\r\\n            Reason for skipping this stop is required.\\r\\n          </p>\\r\\n        </ion-text>\\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n    <ion-button type=\\\"submit\\\" color=\\\"warning\\\" expand=\\\"block\\\" shape=\\\"round\\\" class=\\\"mt-3\\\">\\r\\n      Skip This Stop\\r\\n    </ion-button>\\r\\n  </form>\\r\\n</ion-content>\\r\\n\";"],"sourceRoot":"webpack:///"}