{"version":3,"sources":["./src/app/tabpage/completed-routes/completed-routes-routing.module.ts","./src/app/tabpage/completed-routes/completed-routes.module.ts","./src/app/tabpage/completed-routes/completed-routes.page.ts","./src/app/tabpage/completed-routes/completed-routes.page.scss","./src/app/tabpage/completed-routes/completed-routes.page.html"],"names":[],"mappings":"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","file":"src_app_tabpage_completed-routes_completed-routes_module_ts.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { CompletedRoutesPage } from './completed-routes.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: CompletedRoutesPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class CompletedRoutesPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { CompletedRoutesPageRoutingModule } from './completed-routes-routing.module';\r\n\r\nimport { CompletedRoutesPage } from './completed-routes.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    CompletedRoutesPageRoutingModule\r\n  ],\r\n  declarations: [CompletedRoutesPage]\r\n})\r\nexport class CompletedRoutesPageModule {}\r\n","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { RoutesService } from 'src/app/services/routes.service';\r\nimport { UtilService } from 'src/app/services/util.service';\r\nimport * as _ from 'lodash';\r\nimport { Events } from 'src/app/services/events';\r\nimport { AuthService } from 'src/app/services/auth.service';\r\nimport { IonRefresher } from '@ionic/angular';\r\n\r\n@Component({\r\n  selector: 'app-routes',\r\n  templateUrl: './completed-routes.page.html',\r\n  styleUrls: ['./completed-routes.page.scss'],\r\n})\r\nexport class CompletedRoutesPage implements OnInit {\r\n  @ViewChild(IonRefresher) pullToRefresh: IonRefresher;\r\n  routes = [];\r\n  stopsData: any;\r\n  code: any;\r\n  podRep;\r\n\r\n  constructor(\r\n    private utilService: UtilService,\r\n    private routesService: RoutesService,\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    public events: Events,\r\n    private authService: AuthService\r\n  ) {\r\n    this.route.queryParams.subscribe(params => {\r\n      // const driverId = localStorage.getItem('podDriverId');\r\n      // if (params && params.code) {\r\n      //   this.utilService.setStorageData('driverCode', params.code);\r\n      //   this.code = params.code;\r\n      //   this.getRoutes();\r\n      // } else {\r\n      //   this.code = driverId;\r\n      //   this.getRoutes();\r\n      // }\r\n      const driverId = localStorage.getItem('podDriverId');\r\n      if (params && params.code) {\r\n        if (params.code == driverId) {\r\n          this.utilService.setStorageData('driverCode', params.code);\r\n          this.code = params.code;\r\n          this.getRoutes();\r\n        } else {\r\n          this.authService.logout();\r\n        }\r\n      } else {\r\n        this.code = driverId;\r\n        this.getRoutes();\r\n      }\r\n    });\r\n    // });\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  async getRoutes() {\r\n    await this.utilService.showLoading();\r\n    this.routesService.getRoutes(this.code).subscribe((res: any) => {\r\n      this.completeWidgets();\r\n      if (res) {\r\n        this.routes = res;\r\n        this.utilService.setStorageData('completedRoutes', this.routes);\r\n        localStorage.removeItem('activeRouteId');\r\n        this.events.publish('routeId:change', null);\r\n        // localStorage.setItem('activeRouteId', this.routes[0]?.XDRN_0);\r\n        if (navigator.onLine || this.utilService.isOnline) {\r\n          this.getStops();\r\n        }\r\n      }\r\n    }, (err: any) => {\r\n      this.completeWidgets();\r\n      this.utilService.showErrorCall(err);\r\n    });\r\n  }\r\n\r\n  getStops() {\r\n    let stops = [];\r\n    for (let i = 0; i < this.routes.length; i++) {\r\n      this.routesService.getStops(this.routes[i]?.XDRN_0).subscribe((resp: any) => {\r\n        for (let index = 0; index < resp.length; index++) {\r\n          resp[index].routeId = this.routes[i]?.XDRN_0;\r\n          // const findex = _.findIndex(stops, { XDOCNUM_0: resp[index]?.XDOCNUM_0, routeId: this.routes[i]?.XDRN_0 });\r\n          // if (findex < 0) {\r\n          stops.push(resp[index]);\r\n          // } else {\r\n          //   stops[findex] = resp[index];\r\n          // }\r\n        }\r\n        if (i === this.routes.length - 1) {\r\n          this.stopsData = stops;\r\n          this.documentsNPods();\r\n          this.utilService.setStorageData('stops', stops);\r\n        }\r\n      }, (err: any) => {\r\n        this.utilService.showErrorCall(err);\r\n      });\r\n    }\r\n  }\r\n\r\n  documentsNPods() {\r\n    this.utilService.getStorageData('documentinfo').then(documentinfo => {\r\n      if (!documentinfo) {\r\n        documentinfo = [];\r\n      }\r\n      if (this.stopsData.length > 0) {\r\n        for (let index = 0; index < this.stopsData.length; index++) {\r\n          this.routesService.getStopsDetails(this.stopsData[index]?.XDOCNUM_0).subscribe((resp: any) => {\r\n            for (let index = 0; index < resp.length; index++) {\r\n              const findex = _.findIndex(documentinfo, { XDOCNUM_0: resp[index]?.XDOCNUM_0 });\r\n              if (findex < 0) {\r\n                documentinfo.push(resp[index]);\r\n              } else {\r\n                documentinfo[findex] = resp[index];\r\n              }\r\n            }\r\n            this.utilService.setStorageData('documentinfo', documentinfo);\r\n          }, (err: any) => {\r\n            this.utilService.showErrorCall(err);\r\n          });\r\n        }\r\n      }\r\n    });\r\n\r\n    this.utilService.getStorageData('documentdet').then(documentdet => {\r\n      if (!documentdet) {\r\n        documentdet = [];\r\n      }\r\n      if (this.stopsData.length > 0) {\r\n        for (let index = 0; index < this.stopsData.length; index++) {\r\n          this.routesService.getDocumentDetails(this.stopsData[index]?.XDOCNUM_0).subscribe((resp: any) => {\r\n            for (let index = 0; index < resp.length; index++) {\r\n              const findex = _.findIndex(documentdet, { XDOCNUM_0: resp[index]?.XDOCNUM_0 });\r\n              if (findex < 0) {\r\n                documentdet.push(resp[index]);\r\n              } else {\r\n                documentdet[findex] = resp[index];\r\n              }\r\n            }\r\n            this.utilService.setStorageData('documentdet', documentdet);\r\n          }, (err: any) => {\r\n            this.utilService.showErrorCall(err);\r\n          });\r\n        }\r\n      }\r\n    });\r\n\r\n    this.utilService.getStorageData('poddet').then(poddet => {\r\n      if (!poddet) {\r\n        poddet = [];\r\n      }\r\n      if (this.stopsData.length > 0) {\r\n        for (let index = 0; index < this.stopsData.length; index++) {\r\n          this.routesService.getPod(this.stopsData[index]?.XDOCNUM_0).subscribe((resp: any) => {\r\n            for (let index = 0; index < resp.length; index++) {\r\n              const findex = _.findIndex(poddet, { XDOCNUM_0: resp[index]?.XDOCNUM_0 });\r\n              if (findex < 0) {\r\n                poddet.push(resp[index]);\r\n              } else {\r\n                poddet[findex] = resp[index];\r\n              }\r\n            }\r\n            this.utilService.setStorageData('poddet', poddet);\r\n          }, (err: any) => {\r\n            this.utilService.showErrorCall(err);\r\n          });\r\n        }\r\n      }\r\n    });\r\n\r\n    // this.utilService.getStorageData('podrep').then(podrep => {\r\n    //   if (!podrep) {\r\n    //     podrep = [];\r\n    //   }\r\n    //   if (this.stopsData.length > 0) {\r\n    //     for (let index = 0; index < this.stopsData.length; index++) {\r\n    //       this.routesService.getPodReport(this.stopsData[index]?.XDOCNUM_0).subscribe((resp: any) => {\r\n    //         this.podRep = resp;         \r\n    //         for (let index = 0; index < resp.length; index++) {\r\n    //           podrep.push(resp[index]);\r\n    //         }\r\n    //         this.utilService.setStorageData('podrep', podrep);\r\n    //       }, (err: any) => {\r\n    //         this.utilService.showErrorCall(err);\r\n    //       });\r\n    //     }\r\n    //   }\r\n    // });\r\n  }\r\n\r\n  onStart(route, index) {\r\n    localStorage.setItem('activeRouteId', route.XDRN_0);\r\n    this.events.publish('routeId:change', route.XDRN_0);\r\n    this.router.navigate(['/tabs/stop-list'], { queryParams: { route: route.XDRN_0 } });\r\n  }\r\n\r\n  logout() {\r\n    this.utilService.showConfirmationPopup('Logout', 'Are you sure you want to logout?', cb => {\r\n      if (cb == 1) {\r\n        this.authService.logout();\r\n      }\r\n    });\r\n  }\r\n\r\n  doRefresh(event) {\r\n    this.getRoutes();\r\n  }\r\n\r\n  completeWidgets() {\r\n    this.utilService.dismissLoading();\r\n    if (this.pullToRefresh) {\r\n      this.pullToRefresh.complete()\r\n    }\r\n  }\r\n}\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJjb21wbGV0ZWQtcm91dGVzLnBhZ2Uuc2NzcyJ9 */\";","export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-title>#{{ code }} {{ routes[0]?.XDRIVERNAM_0 }}</ion-title>\\r\\n    <ion-icon (click)=\\\"logout()\\\" size=\\\"large\\\" slot=\\\"end\\\" name=\\\"log-out-outline\\\"></ion-icon>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n<ion-content color=\\\"tertiary\\\">\\r\\n  <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"doRefresh($event)\\\">\\r\\n    <ion-refresher-content color=\\\"tertiary\\\"></ion-refresher-content>\\r\\n  </ion-refresher>\\r\\n  <ion-row class=\\\"ion-margin-bottom\\\">\\r\\n    <ion-col *ngFor=\\\"let item of routes; let i=index\\\" size-md=\\\"6\\\" class=\\\"ion-no-padding\\\">\\r\\n      <ion-card class=\\\"mb-0\\\">\\r\\n        <ion-card-header color=\\\"dark\\\" class=\\\"p-8\\\">\\r\\n          <ion-row>\\r\\n            <ion-col size=\\\"7\\\">\\r\\n              <ion-card-subtitle>{{ item.XDLVDAT_0 | date:'mediumDate' }}</ion-card-subtitle>\\r\\n              <ion-card-subtitle>{{ item.XFCY_0 }} {{ item.XFCYDES_0 }}</ion-card-subtitle>\\r\\n              <ion-card-title class=\\\"fs-12\\\">{{ item.XDRN_0 }}</ion-card-title>\\r\\n            </ion-col>\\r\\n            <ion-col size=\\\"5\\\">\\r\\n              <ion-chip color=\\\"warning\\\" class=\\\"float-right\\\" *ngIf=\\\"item.XROUTSTAT_0 == 1\\\">\\r\\n                <ion-label>Active</ion-label>\\r\\n              </ion-chip>\\r\\n              <ion-chip color=\\\"danger\\\" class=\\\"float-right\\\" *ngIf=\\\"item.XROUTSTAT_0 == 2\\\">\\r\\n                <ion-label>In-Progress</ion-label>\\r\\n              </ion-chip>\\r\\n              <ion-chip color=\\\"success\\\" class=\\\"float-right\\\" *ngIf=\\\"item.XROUTSTAT_0 == 3\\\">\\r\\n                <ion-label>Completed</ion-label>\\r\\n              </ion-chip>\\r\\n              <ion-chip color=\\\"secondary\\\" class=\\\"float-right\\\" *ngIf=\\\"item.XROUTSTAT_0 == 4\\\">\\r\\n                <ion-label>Checked-In</ion-label>\\r\\n              </ion-chip>\\r\\n              <ion-chip color=\\\"secondary\\\" class=\\\"float-right\\\" *ngIf=\\\"item.XROUTSTAT_0 == 5\\\">\\r\\n                <ion-label>Checked-Out</ion-label>\\r\\n              </ion-chip>\\r\\n              <ion-chip color=\\\"danger\\\" class=\\\"float-right\\\" *ngIf=\\\"item.XROUTSTAT_0 == 6\\\">\\r\\n                <ion-label>Cancelled</ion-label>\\r\\n              </ion-chip>\\r\\n            </ion-col>\\r\\n          </ion-row>\\r\\n        </ion-card-header>\\r\\n        <ion-card-content class=\\\"ion-no-padding\\\">\\r\\n          <ion-item lines=\\\"full\\\" class=\\\"fs-14\\\">\\r\\n            <ion-label color=\\\"primary\\\"><b>Trip</b></ion-label>\\r\\n            <ion-label color=\\\"dark\\\">{{ item.XTRIP_0 }}</ion-label>\\r\\n          </ion-item>\\r\\n          <ion-item lines=\\\"full\\\" class=\\\"fs-14\\\">\\r\\n            <ion-label color=\\\"primary\\\"><b>Total Stops</b></ion-label>\\r\\n            <ion-label color=\\\"dark\\\">{{ item.DocCount }}</ion-label>\\r\\n          </ion-item>\\r\\n          <ion-button color=\\\"primary\\\" class=\\\"ion-margin\\\" expand=\\\"block\\\" (click)=\\\"onStart(item, i)\\\">\\r\\n            <ion-icon slot=\\\"start\\\" name=\\\"navigate-outline\\\"></ion-icon>View Route\\r\\n          </ion-button>\\r\\n        </ion-card-content>\\r\\n      </ion-card>\\r\\n    </ion-col>\\r\\n  </ion-row>\\r\\n</ion-content>\\r\\n\";"],"sourceRoot":"webpack:///"}