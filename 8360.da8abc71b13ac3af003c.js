(self.webpackChunkvehicle_loading=self.webpackChunkvehicle_loading||[]).push([[8360],{8360:(t,i,e)=>{"use strict";e.r(i),e.d(i,{LoadsPageModule:()=>R});var o=e(8583),s=e(3679),n=e(7823),r=e(3256),c=e(5353),a=e(8720),g=e(6135),u=e(7241),Z=e(5935);function l(t,i){1&t&&(a.TgZ(0,"ion-text",9),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&t&&(a.xp6(1),a.hij(" ",a.lcZ(2,1,"COMMON.NO_DATA_FOUND")," "))}function d(t,i){if(1&t&&(a.TgZ(0,"tr"),a.TgZ(1,"th",14),a.TgZ(2,"ion-text",0),a._uU(3),a.ALo(4,"translate"),a.qZA(),a.qZA(),a.TgZ(5,"td"),a.TgZ(6,"div",1),a.TgZ(7,"div"),a._uU(8,":"),a.qZA(),a.TgZ(9,"div",17),a._uU(10),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&t){const t=a.oxw().$implicit;a.xp6(3),a.hij("",a.lcZ(4,2,"LOADS.STAGING_AERA")," "),a.xp6(7),a.Oqu(t.Stage_Location)}}function p(t,i){if(1&t){const t=a.EpF();a.TgZ(0,"div"),a.TgZ(1,"ion-card",10),a.NdJ("click",function(){const i=a.CHM(t).$implicit;return a.oxw().openModel(i)}),a.TgZ(2,"ion-card-content",11),a.TgZ(3,"ion-row"),a.TgZ(4,"ion-col",12),a.TgZ(5,"table",13),a.TgZ(6,"tr"),a.TgZ(7,"th",14),a.TgZ(8,"ion-text",0),a._uU(9),a.ALo(10,"translate"),a.qZA(),a.qZA(),a.TgZ(11,"td",15),a.TgZ(12,"div",16),a.TgZ(13,"div",1),a.TgZ(14,"div"),a._uU(15,":"),a.qZA(),a.TgZ(16,"div",17),a._uU(17),a.qZA(),a.qZA(),a.TgZ(18,"div",18),a._UZ(19,"ion-icon",19),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(20,"tr"),a.TgZ(21,"th",14),a.TgZ(22,"ion-text",0),a._uU(23),a.ALo(24,"translate"),a.qZA(),a.qZA(),a.TgZ(25,"td"),a.TgZ(26,"div",1),a.TgZ(27,"div"),a._uU(28,":"),a.qZA(),a.TgZ(29,"div",17),a._uU(30),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(31,"tr"),a.TgZ(32,"th",14),a.TgZ(33,"ion-text",0),a._uU(34),a.ALo(35,"translate"),a.qZA(),a.qZA(),a.TgZ(36,"td"),a.TgZ(37,"div",1),a.TgZ(38,"div"),a._uU(39,":"),a.qZA(),a.TgZ(40,"div",17),a._uU(41),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(42,"tr"),a.TgZ(43,"th",14),a.TgZ(44,"ion-text",0),a._uU(45),a.ALo(46,"translate"),a.qZA(),a.qZA(),a.TgZ(47,"td"),a.TgZ(48,"div",1),a.TgZ(49,"div"),a._uU(50,":"),a.qZA(),a.TgZ(51,"div",17),a._uU(52),a.ALo(53,"date"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(54,"tr"),a.TgZ(55,"th",14),a.TgZ(56,"ion-text",0),a._uU(57),a.ALo(58,"translate"),a.qZA(),a.qZA(),a.TgZ(59,"td"),a.TgZ(60,"div",1),a.TgZ(61,"div"),a._uU(62,":"),a.qZA(),a.TgZ(63,"div",17),a._uU(64),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(65,"tr"),a.TgZ(66,"th",14),a.TgZ(67,"ion-text",0),a._uU(68),a.ALo(69,"translate"),a.qZA(),a.qZA(),a.TgZ(70,"td"),a.TgZ(71,"div",1),a.TgZ(72,"div"),a._uU(73,":"),a.qZA(),a.TgZ(74,"div",17),a._uU(75),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.YNc(76,d,11,4,"tr",20),a.TgZ(77,"tr"),a.TgZ(78,"th",14),a.TgZ(79,"ion-text",0),a._uU(80),a.ALo(81,"translate"),a.qZA(),a.qZA(),a.TgZ(82,"td"),a.TgZ(83,"div",1),a.TgZ(84,"div"),a._uU(85,":"),a.qZA(),a.TgZ(86,"div",21),a.TgZ(87,"ion-text",22),a._uU(88),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&t){const t=i.$implicit,e=a.oxw();a.xp6(9),a.hij("",a.lcZ(10,18,"LOADS.SITE")," "),a.xp6(8),a.AsE("",t.Site," - ",t.Site_Description,""),a.xp6(6),a.hij("",a.lcZ(24,20,"LOADS.LVS_NUMBER")," "),a.xp6(7),a.Oqu(t.LVS_No),a.xp6(4),a.hij("",a.lcZ(35,22,"LOADS.ROUTE_NUMBER")," "),a.xp6(7),a.Oqu(t.Route_Number),a.xp6(4),a.hij("",a.lcZ(46,24,"LOADS.ROUTE_DATE")," "),a.xp6(7),a.Oqu(a.xi3(53,26,t.Date,"MM/dd/YY")),a.xp6(5),a.hij("",a.lcZ(58,29,"LOADS.VEHICLE")," "),a.xp6(7),a.AsE("",t.Vehicle," - ",t.Vec_DESC,""),a.xp6(4),a.hij("",a.lcZ(69,31,"LOADS.DRIVER")," "),a.xp6(7),a.AsE("",t.Driver_ID," - ",t.Driver_Name,""),a.xp6(1),a.Q6J("ngIf","truck"===e.screenType),a.xp6(4),a.hij("",a.lcZ(81,33,"LOADS.STATUS")," "),a.xp6(8),a.hij(" ",t.Status," ")}}let h=(()=>{class t{constructor(t,i,e,o,s){this.router=t,this.route=i,this.stageLocationService=e,this.utilService=o,this.translateService=s,this.title="",this.tripList=[],this.selectedValue="1",this.isButtonEnabled=!0,this.isLoading=!1,this.searchTerm="",this.userDetail=JSON.parse(localStorage.getItem("userDetail"))}ngOnInit(){}ionViewWillEnter(){this.screenType=this.route.snapshot.queryParams.type,this.clearSearch(),this.title="truck"===this.screenType?"DASHBOARD.LOAD_VEHICLE":"DASHBOARD.LOAD_STAGE_TRUCK","truck"!==this.screenType?this.getTripList():this.getCountTripList()}ionViewWillLeave(){this.filteredTripList=[],this.tripList=[]}clearSearch(){this.searchTerm="",this.filteredTripList=[...this.tripList]}onBack(t){this.router.navigate([t])}openModel(t){return(0,c.mG)(this,void 0,void 0,function*(){localStorage.setItem("tripList",JSON.stringify(t)),this.router.navigate(["/loads/product-modal"],{queryParams:{type:this.screenType}})})}getTripList(){this.isLoading=!0,this.utilService.showLoading(),this.stageLocationService.tripList(this.userDetail.Supervisor_Id).subscribe(t=>{setTimeout(()=>{this.isLoading=!1,this.utilService.dismissLoading()},500),(t.success=!0)?(this.tripList=t.data,this.filteredTripList=[...this.tripList],this.filteredTripList.sort((t,i)=>t.LVS_No<i.LVS_No?1:t.LVS_No>i.LVS_No?-1:0)):this.utilService.showToastError("Something went wrong")})}getCountTripList(){this.isLoading=!0,this.utilService.showLoading(),this.filteredTripList=[],this.stageLocationService.countTripList(this.userDetail.Supervisor_Id).subscribe(t=>{setTimeout(()=>{this.isLoading=!1,this.utilService.dismissLoading()},500),!0===t.success&&t.data&&t.data.length>0?(t.data.map(t=>{"Loads In Completed"!==t.Status&&this.tripList.push(t)}),this.filteredTripList=this.sortTrips(this.tripList)):this.translateService.get(["COMMON.NO_DATA_FOUND"]).subscribe(t=>{this.utilService.showToastError(t["COMMON.NO_DATA_FOUND"])})})}sortTrips(t){const i=t.filter(t=>"Counts In Process"===t.Status),e=t.filter(t=>"Counts In Process"!==t.Status);return i.sort((t,i)=>this.compareLVS_No(i.LVS_No,t.LVS_No)),e.sort((t,i)=>this.compareLVS_No(i.LVS_No,t.LVS_No)),[...i,...e]}compareLVS_No(t,i){const e=/(\d+)|(\D+)/g;let o=t.match(e)||[],s=i.match(e)||[];for(let n=0;n<Math.min(o.length,s.length);n++){let t=o[n],i=s[n];if(isNaN(Number(t))||isNaN(Number(i))){if(t!==i)return t.localeCompare(i)}else if(Number(t)!==Number(i))return Number(t)-Number(i)}return s.length-o.length}filterList(t){const i=t.target.value.toLowerCase();this.filteredTripList=this.tripList.filter(t=>t.Route_Number.toLowerCase().includes(i)||t.LVS_No.toLowerCase().includes(i)||t.Driver_Name.toLowerCase().includes(i)||t.Driver_ID.toLowerCase().includes(i)||t.Vehicle.toLowerCase().includes(i)||"truck"===this.screenType&&t.Stage_Location.toLowerCase().includes(i))}}return t.\u0275fac=function(i){return new(i||t)(a.Y36(r.F0),a.Y36(r.gz),a.Y36(g.c),a.Y36(u.f),a.Y36(Z.sK))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-loads"]],decls:17,vars:9,consts:[["color","primary"],[1,"d-flex"],[1,"d-flex","ion-align-items-center",3,"click"],["name","chevron-back-outline",1,"fs-22"],[1,"fs-18"],["color","tertiary"],["show-cancel-button","focus","placeholder","Search Here..",1,"pb-0",3,"ngModel","ngModelChange","ionInput"],["class","custom-text-center",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"custom-text-center"],[1,"pickups",3,"click"],[1,"p-10"],["size","12",1,"p-0"],[1,"table","table-borderless","font-weight-bold","fs-14","fw-400","mb-0"],["width","130px",1,"justify-content-start"],[1,"w-100"],[1,"d-flex","ion-align-items-center","ion-justify-content-between",2,"position","relative"],[1,"ml-3","text-black","fw-500"],[1,"d-flex","arrow"],["name","chevron-forward",1,"fs-24"],[4,"ngIf"],[1,"ml-3"],["color","danger",1,"mr-5","fw-500"]],template:function(t,i){1&t&&(a.TgZ(0,"ion-header"),a.TgZ(1,"ion-toolbar",0),a.TgZ(2,"div",1),a.TgZ(3,"div",2),a.NdJ("click",function(){return i.onBack("/dashboard")}),a._UZ(4,"ion-icon",3),a.TgZ(5,"span",4),a._uU(6),a.ALo(7,"translate"),a.qZA(),a.qZA(),a.TgZ(8,"ion-title"),a._uU(9),a.ALo(10,"translate"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(11,"ion-content",5),a.TgZ(12,"div"),a.TgZ(13,"ion-searchbar",6),a.NdJ("ngModelChange",function(t){return i.searchTerm=t})("ionInput",function(t){return i.filterList(t)}),a.qZA(),a.qZA(),a.TgZ(14,"div"),a.YNc(15,l,3,3,"ion-text",7),a.qZA(),a.YNc(16,p,89,35,"div",8),a.qZA()),2&t&&(a.xp6(6),a.Oqu(a.lcZ(7,5,"COMMON.BACK")),a.xp6(3),a.Oqu(a.lcZ(10,7,i.title)),a.xp6(4),a.Q6J("ngModel",i.searchTerm),a.xp6(2),a.Q6J("ngIf",!i.isLoading&&i.filteredTripList&&i.filteredTripList.length<=0),a.xp6(1),a.Q6J("ngForOf",i.filteredTripList))},directives:[n.Gu,n.sr,n.gu,n.wd,n.W2,n.VI,n.j9,s.JJ,s.On,o.O5,o.sg,n.yW,n.PM,n.FN,n.Nd,n.wI],pipes:[Z.X$,o.uU],styles:["ion-radio[_ngcontent-%COMP%]::part(container){width:21px;height:21px;border-radius:37px;border:2px solid #ddd}ion-radio[_ngcontent-%COMP%]::part(mark){background:none;transition:none;transform:none;border-radius:0}ion-radio.radio-checked[_ngcontent-%COMP%]::part(container){background:#00815d;border-color:#0000}ion-radio.radio-checked[_ngcontent-%COMP%]::part(mark){width:5px;height:10px;border-color:#fff;border-style:solid;border-width:0 2px 2px 0;transform:rotate(45deg)}.arrow[_ngcontent-%COMP%]{position:absolute;top:-2px;right:-5px}"]}),t})();function A(t,i){if(1&t){const t=a.EpF();a.TgZ(0,"ion-item",2),a.NdJ("click",function(){const i=a.CHM(t).$implicit;return a.oxw(2).selectOption(i.Stage_Location)}),a._uU(1),a.qZA()}if(2&t){const t=i.$implicit;a.xp6(1),a.hij(" ",t.Stage_Location," ")}}function T(t,i){if(1&t&&(a.TgZ(0,"ion-list"),a.YNc(1,A,2,1,"ion-item",1),a.qZA()),2&t){const t=a.oxw();a.xp6(1),a.Q6J("ngForOf",t.options)}}function L(t,i){1&t&&(a.TgZ(0,"ion-text"),a._uU(1," No options available. "),a.qZA())}let q=(()=>{class t{constructor(t){this.modalController=t,this.options=[]}ngOnInit(){}dismissModal(){this.modalController.dismiss()}selectOption(t){this.modalController.dismiss(t)}}return t.\u0275fac=function(i){return new(i||t)(a.Y36(n.IN))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-staging-modal"]],inputs:{options:"options"},decls:7,vars:2,consts:[[4,"ngIf"],["class","ion-text-center",3,"click",4,"ngFor","ngForOf"],[1,"ion-text-center",3,"click"]],template:function(t,i){1&t&&(a.TgZ(0,"ion-header"),a.TgZ(1,"ion-toolbar"),a.TgZ(2,"ion-title"),a._uU(3,"Location"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(4,"ion-content"),a.YNc(5,T,2,1,"ion-list",0),a.YNc(6,L,2,0,"ion-text",0),a.qZA()),2&t&&(a.xp6(5),a.Q6J("ngIf",i.options&&i.options.length>0),a.xp6(1),a.Q6J("ngIf",!i.options||0===i.options.length))},directives:[n.Gu,n.sr,n.wd,n.W2,o.O5,n.q_,o.sg,n.Ie,n.yW],styles:[""]}),t})();var _=e(6738),f=e(4229);function O(t,i){if(1&t&&(a.TgZ(0,"tr"),a.TgZ(1,"th",15),a.TgZ(2,"ion-text",11),a._uU(3),a.ALo(4,"translate"),a.qZA(),a.qZA(),a.TgZ(5,"td"),a.TgZ(6,"div",12),a.TgZ(7,"div",11),a._uU(8,":"),a.qZA(),a.TgZ(9,"div",13),a._uU(10),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&t){const t=a.oxw(2);a.xp6(3),a.hij("",a.lcZ(4,2,"LOADS.STAGING_AERA")," "),a.xp6(7),a.Oqu(t.tripList.Stage_Location)}}function m(t,i){1&t&&(a.TgZ(0,"h1",18),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&t&&(a.xp6(1),a.hij(" ",a.lcZ(2,1,"COMMON.NO_DATA_FOUND")," "))}function S(t,i){1&t&&(a.TgZ(0,"th"),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&t&&(a.xp6(1),a.Oqu(a.lcZ(2,1,"LOADS.COUNT_QUANTITY")))}function x(t,i){1&t&&(a.TgZ(0,"th"),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&t&&(a.xp6(1),a.Oqu(a.lcZ(2,1,"LOADS.UNITS")))}function v(t,i){if(1&t){const t=a.EpF();a.TgZ(0,"td"),a.TgZ(1,"ion-input",21),a.NdJ("ngModelChange",function(i){return a.CHM(t),a.oxw().$implicit.Count_qty=i})("keyup",function(i){a.CHM(t);const e=a.oxw().$implicit;return a.oxw(3).checkNegative(i,e)}),a.qZA(),a.qZA()}if(2&t){const t=a.oxw().$implicit,i=a.oxw(3);a.xp6(1),a.Q6J("ngModel",t.Count_qty)("disabled","Loads In Completed"==i.tripList.Status)}}function N(t,i){if(1&t&&(a.TgZ(0,"td"),a._uU(1),a.qZA()),2&t){const t=a.oxw().$implicit;a.xp6(1),a.Oqu(t.Units)}}function C(t,i){if(1&t&&(a.TgZ(0,"tbody"),a.TgZ(1,"tr"),a.TgZ(2,"td"),a._uU(3),a.qZA(),a.TgZ(4,"td"),a._uU(5),a.qZA(),a.TgZ(6,"td"),a._uU(7),a.qZA(),a.YNc(8,v,2,2,"td",6),a.YNc(9,N,2,1,"td",6),a.qZA(),a.qZA()),2&t){const t=i.$implicit,e=a.oxw(3);a.xp6(3),a.Oqu(t.product),a.xp6(2),a.Oqu(t.Prod_Desc),a.xp6(2),a.Oqu(t.LOT),a.xp6(1),a.Q6J("ngIf","truck"===e.type),a.xp6(1),a.Q6J("ngIf","truck"===e.type)}}function b(t,i){if(1&t&&(a.TgZ(0,"table",19),a.TgZ(1,"thead"),a.TgZ(2,"tr"),a.TgZ(3,"th"),a._uU(4),a.ALo(5,"translate"),a.qZA(),a.TgZ(6,"th"),a._uU(7),a.ALo(8,"translate"),a.qZA(),a.TgZ(9,"th"),a._uU(10),a.ALo(11,"translate"),a.qZA(),a.YNc(12,S,3,3,"th",6),a.YNc(13,x,3,3,"th",6),a.qZA(),a.qZA(),a.YNc(14,C,10,5,"tbody",20),a.qZA()),2&t){const t=a.oxw(2);a.xp6(4),a.Oqu(a.lcZ(5,6,"LOADS.PRODUCT_CODE")),a.xp6(3),a.Oqu(a.lcZ(8,8,"LOADS.DESCRIPTION")),a.xp6(3),a.Oqu(a.lcZ(11,10,"LOADS.LOT_NUMBER")),a.xp6(2),a.Q6J("ngIf","truck"===t.type),a.xp6(1),a.Q6J("ngIf","truck"===t.type),a.xp6(1),a.Q6J("ngForOf",t.productList)}}function w(t,i){if(1&t&&(a.TgZ(0,"ion-card",7),a.TgZ(1,"ion-card-header",8),a.TgZ(2,"table",9),a.TgZ(3,"tr"),a.TgZ(4,"th",10),a.TgZ(5,"ion-text",11),a._uU(6),a.ALo(7,"translate"),a.qZA(),a.qZA(),a.TgZ(8,"td"),a.TgZ(9,"div",12),a.TgZ(10,"div",11),a._uU(11,":"),a.qZA(),a.TgZ(12,"div",13),a._uU(13),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(14,"tr"),a.TgZ(15,"th",10),a.TgZ(16,"ion-text",14),a._uU(17),a.ALo(18,"translate"),a.qZA(),a.qZA(),a.TgZ(19,"td"),a.TgZ(20,"div",12),a.TgZ(21,"div",11),a._uU(22,":"),a.qZA(),a.TgZ(23,"div",13),a._uU(24),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(25,"tr"),a.TgZ(26,"th",10),a.TgZ(27,"ion-text",11),a._uU(28),a.ALo(29,"translate"),a.qZA(),a.qZA(),a.TgZ(30,"td"),a.TgZ(31,"div",12),a.TgZ(32,"div",11),a._uU(33,":"),a.qZA(),a.TgZ(34,"div",13),a._uU(35),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(36,"tr"),a.TgZ(37,"th",10),a.TgZ(38,"ion-text",11),a._uU(39),a.ALo(40,"translate"),a.qZA(),a.qZA(),a.TgZ(41,"td"),a.TgZ(42,"div",12),a.TgZ(43,"div",11),a._uU(44,":"),a.qZA(),a.TgZ(45,"div",13),a._uU(46),a.ALo(47,"date"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(48,"tr"),a.TgZ(49,"th",10),a.TgZ(50,"ion-text",11),a._uU(51),a.ALo(52,"translate"),a.qZA(),a.qZA(),a.TgZ(53,"td"),a.TgZ(54,"div",12),a.TgZ(55,"div",11),a._uU(56,":"),a.qZA(),a.TgZ(57,"div",13),a._uU(58),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(59,"tr"),a.TgZ(60,"th",10),a.TgZ(61,"ion-text",11),a._uU(62),a.ALo(63,"translate"),a.qZA(),a.qZA(),a.TgZ(64,"td"),a.TgZ(65,"div",12),a.TgZ(66,"div",11),a._uU(67,":"),a.qZA(),a.TgZ(68,"div",13),a._uU(69),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.YNc(70,O,11,4,"tr",6),a.TgZ(71,"tr"),a.TgZ(72,"th",15),a.TgZ(73,"ion-text",11),a._uU(74),a.ALo(75,"translate"),a.qZA(),a.qZA(),a.TgZ(76,"td"),a.TgZ(77,"div",12),a.TgZ(78,"div",11),a._uU(79,":"),a.qZA(),a.TgZ(80,"div",13),a.TgZ(81,"ion-text"),a._uU(82),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(83,"ion-card-content"),a.YNc(84,m,3,3,"h1",16),a.YNc(85,b,15,12,"table",17),a.qZA(),a.qZA()),2&t){const t=a.oxw();a.xp6(6),a.hij("",a.lcZ(7,20,"LOADS.SITE")," "),a.xp6(7),a.AsE("",t.tripList.Site," - ",t.tripList.Site_Description,""),a.xp6(4),a.hij("",a.lcZ(18,22,"LOADS.LVS_NUMBER")," "),a.xp6(7),a.Oqu(t.tripList.LVS_No),a.xp6(4),a.hij("",a.lcZ(29,24,"LOADS.ROUTE_NUMBER")," "),a.xp6(7),a.Oqu(t.tripList.Route_Number),a.xp6(4),a.hij("",a.lcZ(40,26,"LOADS.ROUTE_DATE")," "),a.xp6(7),a.Oqu(a.xi3(47,28,t.tripList.Date,"MM/dd/YY")),a.xp6(5),a.hij("",a.lcZ(52,31,"DASHBOARD.VEHICLE")," "),a.xp6(7),a.AsE("",t.tripList.Vehicle," - ",t.tripList.Vec_DESC,""),a.xp6(4),a.hij("",a.lcZ(63,33,"LOADS.DRIVER")," "),a.xp6(7),a.AsE("",t.tripList.Driver_ID," - ",t.tripList.Driver_Name,""),a.xp6(1),a.Q6J("ngIf","truck"===t.type),a.xp6(4),a.hij("",a.lcZ(75,35,"LOADS.STATUS")," "),a.xp6(8),a.hij(" ",t.tripList.Status," "),a.xp6(2),a.Q6J("ngIf",t.productList&&0==t.productList.length),a.xp6(1),a.Q6J("ngIf",t.productList&&t.productList.length>0)}}function M(t,i){if(1&t&&(a.TgZ(0,"ng-option",30),a._uU(1),a.qZA()),2&t){const t=i.$implicit;a.Q6J("value",t.Stage_Location),a.xp6(1),a.Oqu(t.Stage_Location)}}function U(t,i){1&t&&(a.TgZ(0,"div",31),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&t&&(a.xp6(1),a.hij(" ",a.lcZ(2,1,"LOADS.STAGING_VALIDATION")," "))}function I(t,i){if(1&t){const t=a.EpF();a.TgZ(0,"ion-card"),a.TgZ(1,"ion-card-content",22),a.TgZ(2,"table",23),a.TgZ(3,"tr"),a.TgZ(4,"th",10),a.TgZ(5,"ion-text",24),a._uU(6),a.ALo(7,"translate"),a.qZA(),a.qZA(),a.TgZ(8,"td"),a.TgZ(9,"div",12),a.TgZ(10,"div",25),a._uU(11,":"),a.qZA(),a.TgZ(12,"div",26),a.TgZ(13,"ng-select",27),a.NdJ("ngModelChange",function(i){return a.CHM(t),a.oxw().stageLocation=i})("change",function(){return a.CHM(t),a.oxw().errorMessage=!1}),a.YNc(14,M,2,2,"ng-option",28),a.qZA(),a.YNc(15,U,3,3,"div",29),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&t){const t=a.oxw();a.xp6(6),a.hij("",a.lcZ(7,5,"LOADS.STAGING_LOCATION")," "),a.xp6(7),a.Q6J("ngModel",t.stageLocation)("clearable",!0),a.xp6(1),a.Q6J("ngForOf",t.stageList),a.xp6(1),a.Q6J("ngIf",t.errorMessage&&!t.stageLocation)}}function D(t,i){if(1&t){const t=a.EpF();a.TgZ(0,"ion-footer"),a.TgZ(1,"ion-toolbar"),a.TgZ(2,"ion-button",32),a.NdJ("click",function(){return a.CHM(t),a.oxw().moveToStage()}),a._uU(3),a.ALo(4,"translate"),a.qZA(),a.qZA(),a.qZA()}2&t&&(a.xp6(3),a.Oqu(a.lcZ(4,1,"LOADS.MOVE_TO_STAGE_LOCATION")))}function y(t,i){if(1&t){const t=a.EpF();a.TgZ(0,"ion-footer"),a.TgZ(1,"ion-toolbar"),a.TgZ(2,"ion-row"),a.TgZ(3,"ion-col",33),a.TgZ(4,"ion-button",32),a.NdJ("click",function(){return a.CHM(t),a.oxw().onConfirm("save")}),a._uU(5),a.ALo(6,"translate"),a.qZA(),a.qZA(),a.TgZ(7,"ion-col",33),a.TgZ(8,"ion-button",32),a.NdJ("click",function(){return a.CHM(t),a.oxw().onConfirm("confirm")}),a._uU(9),a.ALo(10,"translate"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}2&t&&(a.xp6(5),a.Oqu(a.lcZ(6,2,"COMMON.SAVE")),a.xp6(4),a.Oqu(a.lcZ(10,4,"COMMON.CONFIRM")))}const E=[{path:"",component:h},{path:"product-modal",component:(()=>{class t{constructor(t,i,e,o,s,n){this.translateService=t,this.utilService=i,this.modalController=e,this.stageLocationService=o,this.router=s,this.route=n,this.stageLocation="",this.dropdownVisible=!1,this.isConfirmEnabled=!1,this.submitted=!1,this.errorMessage=!1,this.userDetail=JSON.parse(localStorage.getItem("userDetail")),this.route.queryParams.subscribe(t=>{this.type=t.type})}ngOnInit(){}ionViewWillEnter(){this.tripList=JSON.parse(localStorage.getItem("tripList")),"truck"!==this.type&&this.getStageList(),this.getCountDetail()}productDetail(){this.utilService.showLoading(),this.stageLocationService.productDetail(this.tripList.Vehicle,this.userDetail.Sites).subscribe(t=>{setTimeout(()=>{this.utilService.dismissLoading()},500),(t.success=!0)?this.productList=t.data:this.utilService.showToastError("Something went wrong"),this.getStageList()})}goBack(){this.router.navigate(["/loads"],{queryParams:{type:this.type}})}moveToStage(){this.stageLocation?(this.errorMessage=!1,this.translateService.get(["COMMON.CONFIRMATION","COMMON.CONFIRM_UPDATE_STAGING_LOCATION","COMMON.LOCATION"]).subscribe(t=>{this.utilService.showConfirmationPopup(t["COMMON.CONFIRMATION"],t["COMMON.CONFIRM_UPDATE_STAGING_LOCATION"]+" "+`${this.stageLocation} `+t["COMMON.LOCATION"],t=>{if(1==t){const t={I_XCODEYVE:this.tripList.Vehicle,I_XSTOFCY:this.tripList.Site,I_XVRSEL:this.tripList.Route_Number,I_XSTAGELOC:this.stageLocation};this.utilService.showLoading(),this.stageLocationService.moveToStageLocation(t).subscribe(t=>{setTimeout(()=>{this.utilService.dismissLoading()},500),1==t.success?(this.router.navigate(["/loads"],{queryParams:{type:this.type}}),this.router.navigate(["/dashboard"]),localStorage.removeItem("tripList"),this.utilService.showToastSucccess(t.messages)):this.utilService.showToastError(t.messages)})}})})):this.errorMessage=!0}onConfirm(t){this.translateService.get(["COMMON.CONFIRMATION","COMMON.CONFIRM_COUNT_ROUTE","COMMON.SAVE_COUNT_ROUTE"]).subscribe(i=>{this.utilService.showConfirmationPopup(i["COMMON.CONFIRMATION"],"save"==t?i["COMMON.SAVE_COUNT_ROUTE"]:i["COMMON.CONFIRM_COUNT_ROUTE"],i=>{1==i&&this.save(t)})})}save(t){this.utilService.showLoading(),this.tripList.Date=_(this.tripList.Date).format("YYYYMMDD"),this.stageLocationService.confirmCount({Type:t,I_XFCY:this.tripList.Site,I_XDATE:this.tripList.Date,I_XVRSEL:this.tripList.Route_Number,I_XVEHICLE:this.tripList.Vehicle,I_XDRIVER:this.tripList.Driver_ID,Lot_Number:this.productList.Lot_Number,LVS_NO:this.tripList.LVS_No,I_XAPPUSER:this.userDetail.Supervisor_Id,array:this.productList}).subscribe(i=>{1==i.success?setTimeout(()=>{this.utilService.dismissLoading(),"save"==t?(localStorage.removeItem("tripList"),this.router.navigate(["/loads"],{queryParams:{type:this.type}}),this.utilService.showToastSucccess("Count Quantity entered Successfully")):(localStorage.removeItem("tripList"),this.router.navigate(["/loads"],{queryParams:{type:this.type}}),this.utilService.showToastSucccess("The stock has been confirmed, and load in has been Completed"))},500):(this.utilService.dismissLoading(),this.utilService.showToastError(i.messages))})}getStageList(){this.stageLocationService.stageList(this.tripList.Site).subscribe(t=>{(t.success=!0)?(this.stageList=t.data,this.stageLocation=t.data[0].Stage_Location):this.utilService.showToastError("Something went wrong")})}openModal(){return(0,c.mG)(this,void 0,void 0,function*(){const t=yield this.modalController.create({component:q,cssClass:"stage-modal",componentProps:{options:this.stageList}});t.onDidDismiss().then(t=>{t.data&&(this.stageLocation=t.data)}),yield t.present()})}getCountDetail(){this.utilService.showLoading(),this.stageLocationService.countProductDetail(this.tripList.Route_Number).subscribe(t=>{setTimeout(()=>{this.utilService.dismissLoading()},500),(t.success=!0)?(this.productList=t.data,this.productList=this.productList.map(t=>(t.Count_qty=0,t)),"Counts In Process"==this.tripList.Status&&this.getCountQty(),"truck"==this.type&&this.getQTY()):this.utilService.showToastError("Something went wrong")})}getQTY(){this.stageLocationService.countPOQty(this.tripList.Route_Number).subscribe(t=>{(t.success=!0)?this.productList.map(i=>{t.data.map(t=>{if(i.product==t.product)return i.Expected_QTY=t.Expected_QTY?t.Expected_QTY:0})}):this.utilService.showToastError("Something went wrong")})}getCountQty(){this.stageLocationService.countQty(this.tripList.Route_Number).subscribe(t=>{(t.success=!0)?this.productList=t.data:this.utilService.showToastError("Something went wrong")})}checkNegative(t,i){if(i.Count_qty<0)return i.Count_qty=0}}return t.\u0275fac=function(i){return new(i||t)(a.Y36(Z.sK),a.Y36(u.f),a.Y36(n.IN),a.Y36(g.c),a.Y36(r.F0),a.Y36(r.gz))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-productmodal"]],decls:16,vars:10,consts:[["color","primary"],["slot","start"],[1,"d-flex","ion-align-items-center",3,"click"],["name","chevron-back-outline",1,"fs-22"],[1,"fs-18"],["class","mt-15 pickups",4,"ngIf"],[4,"ngIf"],[1,"mt-15","pickups"],["color","primary",1,"p-10"],[1,"table","table-borderless","font-weight-bold","mt-5","fs-14","fw-600"],["width","130px"],[1,"text-white"],[1,"d-flex"],[1,"ml-2","text-white"],["color","primary",1,"text-white"],["width","130px",1,"justify-content-start"],["class","fs-16 fw-600 ion-justify-content-center d-flex my-15",4,"ngIf"],["class","product-detail table table-borderless font-weight-bold mt-15 fs-14 fw-600",4,"ngIf"],[1,"fs-16","fw-600","ion-justify-content-center","d-flex","my-15"],[1,"product-detail","table","table-borderless","font-weight-bold","mt-15","fs-14","fw-600"],[4,"ngFor","ngForOf"],["type","number","min","0",1,"qty-input","d-flex","ion-text-center",3,"ngModel","disabled","ngModelChange","keyup"],[1,"p-10"],[1,"table","table-borderless","font-weight-bold","mt-5","fs-14","fw-600","mb-2"],[1,"mt-5","d-flex","ion-justify-content-center"],[1,"mt-5"],[1,"ml-2"],["placeholder","Select location",3,"ngModel","clearable","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["class","error-msg",4,"ngIf"],[3,"value"],[1,"error-msg"],["expand","block",3,"click"],["size","6"]],template:function(t,i){1&t&&(a.TgZ(0,"ion-header"),a.TgZ(1,"ion-toolbar",0),a.TgZ(2,"ion-buttons",1),a.TgZ(3,"div",2),a.NdJ("click",function(){return i.goBack()}),a._UZ(4,"ion-icon",3),a.TgZ(5,"span",4),a._uU(6),a.ALo(7,"translate"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(8,"ion-title"),a._uU(9),a.ALo(10,"translate"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(11,"ion-content"),a.YNc(12,w,86,37,"ion-card",5),a.YNc(13,I,16,7,"ion-card",6),a.qZA(),a.YNc(14,D,5,3,"ion-footer",6),a.YNc(15,y,11,6,"ion-footer",6)),2&t&&(a.xp6(6),a.Oqu(a.lcZ(7,6,"COMMON.BACK")),a.xp6(3),a.Oqu(a.lcZ(10,8,"LOADS.PRODUCT_DETAIL")),a.xp6(3),a.Q6J("ngIf",i.tripList),a.xp6(1),a.Q6J("ngIf","truck"!==i.type),a.xp6(1),a.Q6J("ngIf","truck"!==i.type),a.xp6(1),a.Q6J("ngIf","truck"===i.type&&i.tripList&&"Loads In Completed"!==i.tripList.Status))},directives:[n.Gu,n.sr,n.Sm,n.gu,n.wd,n.W2,o.O5,n.PM,n.Zi,n.yW,n.FN,o.sg,n.pK,n.as,s.JJ,s.On,f.w9,f.jq,n.fr,n.YG,n.Nd,n.wI],pipes:[Z.X$,o.uU],styles:[".custom-border[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:4px;padding:5px}.input-container[_ngcontent-%COMP%]{position:relative;width:100%}.search-icon[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%);cursor:pointer;color:#666;z-index:10}ion-card[_ngcontent-%COMP%]{overflow:visible}ng-select[_ngcontent-%COMP%]   .ng-dropdown-panel[_ngcontent-%COMP%]{z-index:1000!important}.product-detail[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.product-detail[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .product-detail[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;text-align:left}.product-detail[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2}"]}),t})()}];let k=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[r.Bz.forChild(E)],r.Bz]}),t})(),Y=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({providers:[],imports:[[o.ez]]}),t})(),R=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[o.ez,s.u5,n.Pc,k,Z.aw,s.UX,Y,f.A0]]}),t})()}}]);